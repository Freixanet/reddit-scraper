<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Reddit Scraper Pro</title>
  <link rel="stylesheet" href="/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1>Reddit Scraper Pro</h1>
    
    <form id="scraperForm" method="POST" action="/scrape">
      <div class="form-group">
        <label for="subreddit">Subreddit a analizar</label>
        <input 
          type="text" 
          id="subreddit" 
          name="subreddit" 
          placeholder="Ej: programming"
          autocomplete="off"
          required
          pattern="^[a-zA-Z0-9_]+$"  <!-- Asegura que solo se ingresen caracteres permitidos -->
          title="Solo se permiten letras, nÃºmeros y guiones bajos"
        >
      </div>
      
      <div class="button-group">
        <button type="submit">ðŸš€ Iniciar Scraping</button>
        <button type="reset" class="secondary">ðŸ”„ Reiniciar</button>
      </div>
    </form>
    
    <div id="loading" class="loading-container" style="display: none;">
      <div class="loader"></div>
      <p class="loading-text">Analizando contenido del subreddit...</p>
    </div>
    
    <% if (error) { %>
      <div class="error-message">
        <p><%= error %></p>
      </div>
    <% } %>
    
    <% if (summary && summary.length > 0) { %>
      <div class="results-container">
        <h2>Tendencias principales</h2>
        <ul class="summary-list">
          <% summary.forEach(item => { %>
            <li><%= item %></li>  <!-- Lista de tendencias obtenidas del scraping -->
          <% }) %>
        </ul>
      </div>
    <% } %>
  </div>

  <script>
    document.getElementById('scraperForm').addEventListener('submit', function(event) {
      const subredditInput = document.getElementById('subreddit');
      
      // Verifica que el input cumpla con los requisitos antes de enviar el formulario
      if (!subredditInput.checkValidity()) {
        event.preventDefault();
        alert(subredditInput.validationMessage);
        return;
      }
      
      // Muestra la animaciÃ³n de carga mientras se realiza el scraping
      document.getElementById('loading').style.display = 'flex';
    });
  </script>
</body>
</html>